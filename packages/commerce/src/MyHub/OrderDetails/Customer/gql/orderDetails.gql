# @package     BlueAcorn/MyHub
# @author      Blue Acorn iCi <code@blueacorn.com>
# @copyright   Copyright Â© Blue Acorn iCi. All Rights Reserved.

query OrderDetails($cmsBlocks: [String], $orderNumber: String) {
    customer {
        email
        orders(filter: { number: { eq: $orderNumber } }) {
            items {
                id
                number
                netsuite {
                    orderId
                    shippingMethod
                    paymentMethod
                    onlineOrder
                }
                configurators {
                    guide
                }
                narvarTrackingUrl
                orderDate: order_date
                status
                items {
                    id
                    product {
                        name
                        categories {
                            uid
                            name
                            urlPath: url_path
                        }
                        thumbnail {
                            label
                            url
                        }
                        related: crosssell_products {
                            sku
                        }
                    }
                    price: product_sale_price {
                        currency
                        value
                    }
                    discounts {
                        amount {
                            currency
                            value
                        }
                    }
                    name: product_name
                    sku: product_sku
                    qty: quantity_ordered
                }
                billingAddress: billing_address {
                    firstname
                    lastname
                    street
                    city
                    region
                    postcode
                    countryCode: country_code
                    telephone
                }
                shippingAddress: shipping_address {
                    firstname
                    lastname
                    street
                    city
                    region
                    postcode
                    countryCode: country_code
                    telephone
                }
                paymentMethods: payment_methods {
                    name
                    type
                }
                shippingMethod: shipping_method
                total {
                    grandTotal: grand_total {
                        value
                        currency
                    }
                    totalTax: total_tax {
                        value
                        currency
                    }
                    subtotal {
                        value
                        currency
                    }
                    giftCard: total_giftcard {
                        value
                        currency
                    }
                    shippingHandling: shipping_handling {
                        totalAmount: total_amount {
                            value
                            currency
                        }
                    }
                    discounts {
                        amount {
                            value
                            currency
                        }
                        label
                    }
                    salePriceSavingsTotal {
                        value
                        currency
                    }
                }
            }
        }
    }
    cmsBlocks(identifiers: $cmsBlocks) {
        items {
            identifier
            title
            content
        }
    }
}
